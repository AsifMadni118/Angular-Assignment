<div class="card">
  <h2>{{ isEditMode ? 'Edit Person' : 'Add New Person' }}</h2>

  <div *ngIf="error" class="error">
    <strong>Error:</strong> {{ error }}
  </div>

  <div *ngIf="success" class="success">
    <strong>Success:</strong> {{ success }}
  </div>

  <div *ngIf="loading && !isEditMode" class="loading">
    <p>Saving person...</p>
  </div>

  <div *ngIf="loading && isEditMode" class="loading">
    <p>Loading person data...</p>
  </div>

  <form *ngIf="!loading || isEditMode" (ngSubmit)="savePerson()">
    <div class="form-group">
      <label for="name">Name *</label>
      <input
        type="text"
        id="name"
        name="name"
        [(ngModel)]="person.name"
        required
        placeholder="Enter full name"
      />
    </div>

    <div class="form-group">
      <label for="username">Username</label>
      <input
        type="text"
        id="username"
        name="username"
        [(ngModel)]="person.username"
        placeholder="Enter username"
      />
    </div>

    <div class="form-group">
      <label for="email">Email *</label>
      <input
        type="email"
        id="email"
        name="email"
        [(ngModel)]="person.email"
        required
        placeholder="Enter email address"
      />
    </div>

    <div class="form-group">
      <label for="phone">Phone</label>
      <input
        type="tel"
        id="phone"
        name="phone"
        [(ngModel)]="person.phone"
        placeholder="Enter phone number"
      />
    </div>

    <div class="form-group">
      <label for="website">Website</label>
      <input
        type="url"
        id="website"
        name="website"
        [(ngModel)]="person.website"
        placeholder="Enter website URL"
      />
    </div>

    <h3 style="margin-top: 2rem; margin-bottom: 1rem; color: #2196F3;">Address</h3>

    <div class="form-group">
      <label for="street">Street</label>
      <input
        type="text"
        id="street"
        name="street"
        [(ngModel)]="person.address.street"
        placeholder="Enter street address"
      />
    </div>

    <div class="form-group">
      <label for="suite">Suite</label>
      <input
        type="text"
        id="suite"
        name="suite"
        [(ngModel)]="person.address.suite"
        placeholder="Enter suite/apartment"
      />
    </div>

    <div class="form-group">
      <label for="city">City</label>
      <input
        type="text"
        id="city"
        name="city"
        [(ngModel)]="person.address.city"
        placeholder="Enter city"
      />
    </div>

    <div class="form-group">
      <label for="zipcode">Zipcode</label>
      <input
        type="text"
        id="zipcode"
        name="zipcode"
        [(ngModel)]="person.address.zipcode"
        placeholder="Enter zipcode"
      />
    </div>

    <h3 style="margin-top: 2rem; margin-bottom: 1rem; color: #2196F3;">Company</h3>

    <div class="form-group">
      <label for="companyName">Company Name</label>
      <input
        type="text"
        id="companyName"
        name="companyName"
        [(ngModel)]="person.company.name"
        placeholder="Enter company name"
      />
    </div>

    <div style="margin-top: 2rem;">
      <button type="submit" class="btn btn-success" [disabled]="loading">
        <i class="material-icons" style="vertical-align: middle; margin-right: 0.5rem;">save</i>
        {{ isEditMode ? 'Update Person' : 'Create Person' }}
      </button>
      <button type="button" class="btn btn-secondary" (click)="cancel()" [disabled]="loading">
        <i class="material-icons" style="vertical-align: middle; margin-right: 0.5rem;">cancel</i>
        Cancel
      </button>
    </div>
  </form>
</div>

